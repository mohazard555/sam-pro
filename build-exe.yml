name: Build SAM PRO EXE

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
        
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install pyinstaller
        
    - name: Build EXE
      run: |
        pyinstaller --onefile --windowed --name "SAM PRO" --icon "assets/sam-pro-icon-256x256.png" --add-data "index.html;." --add-data "static;static" --add-data "assets;assets" run_sam_pro.py
        
    - name: Upload EXE artifact
      uses: actions/upload-artifact@v3
      with:
        name: SAM-PRO-Windows
        path: dist/SAM PRO.exe
        
    - name: Create Release
      if: github.ref == 'refs/heads/main'
      uses: softprops/action-gh-release@v1
      with:
        tag_name: v1.0.0
        name: SAM PRO v1.0.0
        body: |
          ## SAM PRO - Ù†Ø¸Ø§Ù… Ù…Ø­Ø§Ø³Ø¨Ø© Ø´Ø§Ù…Ù„
          
          ### ğŸ‰ Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø£ÙˆÙ„ Ù…Ù† Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨
          
          **Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª:**
          - âœ… Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø³Ø·Ø­ Ù…ÙƒØªØ¨ ÙƒØ§Ù…Ù„
          - âœ… ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† ØªØ«Ø¨ÙŠØª Python
          - âœ… ÙˆØ§Ø¬Ù‡Ø© ÙˆÙŠØ¨ Ø­Ø¯ÙŠØ«Ø©
          - âœ… Ø¬Ù…ÙŠØ¹ Ù…Ù…ÙŠØ²Ø§Øª SAM PRO
          
          **ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:**
          1. Ø­Ù…Ù„ Ù…Ù„Ù `SAM PRO.exe`
          2. Ø§Ù†Ù‚Ø± Ù…Ø±ØªÙŠÙ† Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬
          3. Ø³ÙŠÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
          
          **Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ:**
          - Ø§Ù„Ù…Ø·ÙˆØ±: MOHANNAD AHMAD
          - Ø§Ù„Ù‡Ø§ØªÙ: +963-998-171-954
          
        files: |
          dist/SAM PRO.exe
        draft: false
        prerelease: false
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
